@inject IJSRuntime JS

<div class="swiper-container" @ref="container">
    <button class="nav-btn-previous">
        <i class="bi bi-chevron-left"></i>
    </button>
    <div class="d-flex flex-grow-1 align-items-center overflow-x-auto swiper-content">
        @foreach (var cast in Casts)
        {
            <ActorSwiperItem Cast="cast"/>
        }
    </div>
    <button class="nav-btn-next">
        <i class="bi bi-chevron-right"></i>
    </button>
</div>

@code {
    [Parameter, EditorRequired]
    public List<Cast> Casts { get; set; } = [];

    // Reference to the swiper container to pass to JS
    ElementReference container;

    // Fires everytime the page changes 
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Loads any JS function labelled 'export'
            await using var jsModule = await JS.InvokeAsync<IJSObjectReference>(
                "import", "/Components/UI/ActorSwiper/ActorSwiper.razor.js"
            );

            await jsModule.InvokeVoidAsync("init", container);
        }
    }
}